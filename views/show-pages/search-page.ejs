<!DOCTYPE HTML>
<html lang="en-US">
	<head>		
		<!--Metatags-->
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta http-equiv="X-UA-Compatble" content="ie=edge"/>		
		<!--Website Title-->
		<title>Search Results</title>
		<!--Calling Favicon-->
		<link rel="icon" href="../images/favicon.png" />
		<link rel="shortcut icon" href="images/favicon.ico" />		
		<!--FontAwesome CDN-->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
		<!--Normalize v8.0.1 CSS FILE-->
		<link rel="stylesheet" href="../css/normalize.css"/>
		<!--Bootstrap v4.6.0 CSS FILE-->
		<link rel="stylesheet" href="../css/bootstrap.min.css"/>		
		<!--Fonts Are Loads From Here-->
		<link rel="stylesheet" href="../fonts/fonts.css"/>
		<!--Owl Carousel CSS File-->
		<link rel="stylesheet" href="../css/owl.carousel.min.css" />
		<link rel="stylesheet" href="../css/owl.theme.default.min.css" />
		<!--Gabazzo Common CSS File-->
		<link rel="stylesheet" href="../css/gabazzo.common.css" />
		<!--Main Stylesheet-->
		<link rel="stylesheet" href="../css/updatedStyles.css"/>		
		<!--Stylesheet For The Responsiveness-->
		<link rel="stylesheet" href="../css/responsive.css"/>
		<!--Stylesheet For The Night Mode-->
		<link rel="stylesheet" href="../css/night.mode.css"/>	

		<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.js'></script>
		<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.css' rel='stylesheet' />

	</head>
	
	<body>
		
		<!--===== Markup For "Header" Starts From Here =====-->
		<header class="header">
			<nav class="navbar navbar-expand-lg">
				<div class="container">
					<div class="logo_mode_switching">
						<ul>
							<li><a href="/" class="navbar-brand"><img src="../images/layout/gabazzo_logo_white.png" class="img-fluid" alt="" /></a></li>
							<li>
								<a class="mode_icon" href="javascript:void(0)">
									<img src="../images/layout/mode_icon_night.png" class="img-fluid night_icon" title="Night Mode" data-toggle="tooltip" alt="" />
									<img src="../images/layout/mode_icon_day.png" class="img-fluid day_icon" title="Day Mode" data-toggle="tooltip" alt="" />
								</a>
							</li>
						</ul>
					</div>

					<% if(currentUser) { %>
						<div class="mobile_profile_menubar">
							<button class="navbar-toggler" data-target="#responsive-bar" data-toggle="collapse">
								<div class="humbergur_icon">
									<span></span><span></span><span></span><span></span>
								</div>
							</button>
	
							<a href="javascript:void(0)" class="nav-link profile_pic_link membersProfilePic">
								<div class="profile_pic">
									<% if (currentUser.isCompany) { %>
										<% if(currentUser.logo) { %>
											<img src="<%= currentUser.logo %>" class="img-fluid" alt="" />
										<% } else {%>
											<img src="../images/man.png" class="img-fluid" alt="" />
										<% }%>
									<% } else { %>
										<% if(currentUser.profilePicture) {%>
											<img src="<%= currentUser.profilePicture %>" class="img-fluid" alt="<%= currentUser.username %>" />
										<%} else {%>
											<img src="../images/man.png" class="img-fluid" alt="<%= currentUser.username %>" />
										<% }%>
									<% } %>
									<span class="activity_status online_status"></span>
								</div>
							</a>
						</div>
					<% }else{ %>
					<button class="navbar-toggler" data-target="#responsive-bar" data-toggle="collapse">
						<div class="humbergur_icon">
							<span></span><span></span><span></span><span></span>
						</div>
					</button>
					<% }%>

					<div class="collapse navbar-collapse" id="responsive-bar">
						<div class="menus ml-auto">
							<ul class="navbar-nav services_menu">
								<li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Construction Services</a>
									<div class="dropdown-menu">
										<ul class="dropdown_column">
											<li><a href="/search?category=roofing services" class="dropdown-item">Roofing</a></li>
											<li><a href="/search?category=landscaping services" class="dropdown-item">Landscaping</a></li>
											<li><a href="/search?category=junk removal" class="dropdown-item">Junk Removal</a></li>
											<li><a href="/search?category=masonry services" class="dropdown-item">Masonry</a></li>
											<li><a href="/search?category=plumbing services" class="dropdown-item">Plumbing</a></li>
											<li><a href="/search?category=hvac services" class="dropdown-item">HVAC</a></li>
											<li><a href="/search?category=pest control" class="dropdown-item">Pest Control</a></li>
											<li><a href="/search?category=painting services" class="dropdown-item">Painting</a></li>
										</ul>
	
										<ul class="dropdown_column">
											<li><a href="/search?category=flooring services" class="dropdown-item">Flooring</a></li>
											<li><a href="/search?category=electrical services" class="dropdown-item">Electrical</a></li>
											<li><a href="/search?category=moving services" class="dropdown-item">Moving</a></li>
											<li><a href="/search?category=appliance services" class="dropdown-item">Appliance</a></li>
											<li><a href="/search?category=locksmith services" class="dropdown-item">Locksmith</a></li>
										</ul>
									</div>
								</li>
								<li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Vehicle Services</a>
									<div class="dropdown-menu">
										<ul class="dropdown_column">
											<li><a href="/search?category=towing services" class="dropdown-item">Towing</a></li>
											<li><a href="/search?category=vehicle repair" class="dropdown-item">Vehicle Repair</a></li>
										</ul>
									</div>
								</li>
							</ul>
							
							<% if(!currentUser) { %>
							<ul class="navbar-nav access_menu">
								<li class="nav-item"><a href="/login" class="nav-link sign_in">Sign In</a></li>
								<li class="nav-item"><a href="/sign-up" class="nav-link gbtn gbtn_white_bdr">Sign Up</a></li>
								<li class="nav-item"><a href="/become-a-seller-overview" class="nav-link gbtn">Become a Seller</a></li>
							</ul>
							<% } else { %>
							<ul class="navbar-nav access_menu">
								<li class="nav-item desktop_only_link"><a href="/inbox/<%= lastMessage?.messages?.receiver.id %>" class="nav-link">Messages</a></li>
								<% if(currentUser && !currentUser.isCompany) { %>
									<li class="nav-item desktop_only_link"><a href="/saved-list" class="nav-link">Saved List</a></li>
								<% } %>
								<li class="nav-item profile_pic_desktop">
									<a href="javascript:void(0)" class="nav-link profile_pic_link membersProfilePic">
										<div class="profile_pic">
											<% if (currentUser.isCompany) { %>
												<% if(currentUser.logo) { %>
													<img src="<%= currentUser.logo %>" class="img-fluid" alt="" />
												<% } else {%>
													<img src="../images/man.png" class="img-fluid" alt="" />
												<% }%>
											<% } else { %>
												<% if(currentUser.profilePicture) {%>
													<img src="<%= currentUser.profilePicture %>" class="img-fluid" alt="<%= currentUser.username %>" />
												<%} else {%>
													<img src="../images/man.png" class="img-fluid" alt="<%= currentUser.username %>" />
												<% }%>
											<% } %>
											<span class="activity_status online_status"></span>
										</div>
									</a>
								</li>
							</ul>
							<% } %>
						</div>
					</div>
				</div>
			</nav>
		</header>
		<!--===== Markup For "Header" Ends Here =====-->
	
		<% if(currentUser) { %>
		<!--===== Markup For "Members Profile Link" Starts From Here =====-->
		<div class="membersProfileLinks">
			<div class="dismissMembersProfileLinks">
				<i class="fa fa-times"></i>
			</div>
			<div class="members_profile_pic">
				<% if (currentUser.isCompany) { %>
                    <% if(currentUser.logo) { %>
						<a href="javascript:void(0)"><img src="<%= currentUser.logo %>" class="img-fluid" alt="<%= currentUser.username %>" /></a>
					<% } else {%>
						<a href="javascript:void(0)"><img src="../images/man.png" class="img-fluid" alt="<%= currentUser.username %>" /></a>
					<% }%>
					<h6><%= currentUser.companyName %></h6>
                <% } else { %>
                    <% if(currentUser.profilePicture) {%>
						<a href="javascript:void(0)"><img src="<%= currentUser.profilePicture %>" class="img-fluid" alt="<%= currentUser.username %>" /></a>
                    <%} else {%>
						<a href="javascript:void(0)"><img src="../images/man.png" class="img-fluid" alt="<%= currentUser.username %>" /></a>
                    <% }%>
					<h6><%= currentUser.firstName + " " + currentUser.lastName %></h6>
                <% } %>
			</div>
			<div class="profile_links">
				<% if (currentUser.isCompany) { %>
					<ul>
						<li><i class="fas fa-user"></i> <a href="/company-dashboard">View Dashboard</a></li>
						<li class="mobile_only"><i class="fas fa-envelope"></i> <a href="/inbox/<%= lastMessage?.messages?.receiver.id %>">Messages</a></li>
						<li><i class="fas fa-cog"></i> <a href="/company-settings/account">Settings</a></li>
						<li><i class="fas fa-power-off"></i> <a href="/logout">Logout</a></li>
					</ul>
                <% } else { %>
					<ul>
						<li><i class="fas fa-user"></i> <a href="/member-profile/<%= currentUser._id %>">View Profile</a></li>
						<li class="mobile_only"><i class="fas fa-envelope"></i> <a href="/inbox/<%= lastMessage?.messages?.receiver.id %>">Messages</a></li>
						<% if(currentUser && !currentUser.isCompany) { %>
							<li class="mobile_only"><i class="fas fa-list-alt"></i> <a href="/saved-list">Saved List</a></li>
						<% } %>
						<li><i class="fas fa-cog"></i> <a href="/company-settings/account">Settings</a></li>
						<li><i class="fas fa-power-off"></i> <a href="/logout">Logout</a></li>
					</ul>
                <% } %>
			</div>
		</div>
		<!--===== Markup For "Members Profile Link" Ends Here =====-->
		<%  } %>
		
		<!--===== Markup For "Hero Banner" Starts From Here =====-->
		<section class="hero_banner search_banner">
			<div class="overlay">
				<div class="container">
					<div class="banner_heading">
						<% if(filters.title == 'hvac services' ) { %>
							<h3><span style="text-transform: uppercase"><%= filters.title.split(' ')[0] %></span style="text-transform: capitalize"> <%= filters.title.split(' ')[1] %></h3>
						<% }  else { %>
							<h3><%= filters.title %></h3>
						<% } %>
						
						<p><%= filters.tagline %></p>
					</div>
	
					<form autocomplete="off" action="/pages" method="POST">
						<div class="hero_search">
							<input id="myInput" name="service" type="search" placeholder="I’m searching for..." class="form-control">
							<div class="search_icon">
								<img src="../images/layout/search_icon_black.png" class="black_icon" alt="">
								<img src="../images/layout/search_icon_white.png" class="white_icon" alt="">
							</div>
							<button class="btn gbtn" type="submit">Search</button>
						</div>
					</form>
				</div>
			</div>
		</section>
		<!--===== Markup For "Hero Banner" Ends Here =====-->

			
		<section class="search_page">
			<div class="container">
				<div class="indicator_mobile_filter">
					<!--===== Markup For "Page Indicator" Starts From Here =====-->
					<div class="page_indicator">
						<ul>
							<li style="text-transform: capitalize;"><a href="javascript:void(0)"><%= filters.parent %></a></li>
							<li style="text-transform: capitalize;" class="active"><a href="javascript:void(0)"><%= filters.title %></a></li>
						</ul>
					</div>
					<!--===== Markup For "Page Indicator" Ends Here =====-->

					<div class="all_filters_mobile_button grid_item">
						<a class="btn gbtn" href="javascript:void(0)" data-target="#allFilters" data-toggle="modal"><img src="../images/layout/all_filter_icon.png" class="img-fluid" alt="" /></a>
					</div>
				</div>


				<!--===== Markup For "Services Category" Starts From Here =====-->
				<!-- <div class="services_category_slider services_companies owl_controls_outer">
					<div class="owl-carousel">
						<% if(typeof filters.metadata  !== 'undefined') { %>
						<% for( key in filters?.metadata["Service Type"] ) {%>
							<div class="single_category">
								<a href="/search?category=<%= filters.title %>&service Type=<%=key%>">
									<div class="icon">
										<img src="<%= filters.metadata['Service Type'][key].icon %>" class="img-fluid" alt="service type"  loading="lazy"/>
									</div>
									<h6><%= key %></h6>
								</a>
							</div>
						<% }%>
						<% } %>
					</div>
				</div> -->
				<!--===== Markup For "Services Category" Ends Here =====-->


				<%  var isfinancingAvailable = false; let isVerified = false; let isLicensed = false; let isBonded = false; let isInsured = false; let isEmergency = false; let isOnline = false  %>
					
				<% if('financingAvailable' in query) { %>
					<%  isfinancingAvailable = true; %>
				<% } %>

				<% if('verified' in query) {%>
					<%  isVerified = true; %>
				<% } %>
				<% if('licensed' in query) {%>
					<%  isLicensed = true; %>
				<% } %>
				<% if('bonded' in query) {%>
					<%  isBonded = true; %>
				<% } %>
				<% if('insured' in query) {%>
					<%  isInsured = true; %>
				<% } %>
				
				<% if('emergencySeven' in query) {%>
					<%  isEmergency = true; %>
				<% } %>
				<% if('online' in query) {%>
					<%  isOnline= true; %>
				<% } %>

				<!--===== Markup For "Filters" Starts From Here =====-->
				<form action="/search" method="GET" >
				<div class="filters">
					<!-- <div class="single_filter all_filters">
						<a class="btn gbtn" href="javascript:void(0)" data-target="#allFilters" data-toggle="modal"><img src="../images/layout/all_filter_icon.png" class="img-fluid" alt="" /> All Filters</a>
					</div> -->

					
					<% for(let i = 0; i< filters.attributes.length; i++) { %>
					<% if(filters.attributes[i].attributeName !== "Other Filters") { %>
					<div class="single_filter">
						<div class="dropdown" >
							<a class="btn gbtn" href="javascript:void(0)" data-target="#serviceTypeFilter" data-toggle="dropdown"><%= filters.attributes[i].attributeName %></a>
							<div class="dropdown-menu filter_down <%= filters.attributes[i].attributeName == 'Junk Type' ? 'language_filter_content ': '' || filters.attributes[i].attributeName == 'Haul Size' ? 'language_filter_content ': '' %> " aria-labelledby="serviceTypeFilter">
								<div class="filter_content filter_content_details">
									<div class="filters_in_details">
										<div class="filters_title">
											<div class="filter_heading">
												<h4>Filter by:</h4>
											</div>
		
											<div class="filter_types">
												<ul data-toggle="buttons">
													<% for(let j = 0; j< filters.attributes[i]?.possibleValues.length; j++) {%>
				
														<% if(filters.attributes[i].screenControlObject === 'LABEL') {%>
															<div class="filter_type_heading">
																<h5><%= filters.attributes[i]?.possibleValues[j] %></h5>
															</div>
														<%} else if(filters.attributes[i].screenControlObject === 'CHECK_BOX') {%>		
															<li class="btn">
																<input type="radio" name="<%= filters.attributes[i].attributeName %>" value="<%= filters.attributes[i].possibleValues[j] %>" autocomplete="off">
																<div class="circle"></div>
																<h6><%= filters.attributes[i]?.possibleValues[j] %> </h6>
															</li>
													<% }%> 
													<% var availablefilter = filters.attributes.find(o => o.attributeName === filters.attributes[i].possibleValues[j]); %>
													<% if (typeof availablefilter !== 'undefined'){ %>
													<!-- Filter out those values that are traversed -->
														<% filters.attributes = filters.attributes.filter(obj => obj.attributeName !== filters.attributes[i].possibleValues[j]) %>
														
														<% for(let c = 0; c< availablefilter.possibleValues.length; c++) { %>
															<% if(availablefilter.screenControlObject === 'LABEL') {%>
																<div class="filter_type_heading">
																	<h5><%= availablefilter.possibleValues[c] %></h5>
																</div>>
															<%} else if(availablefilter.screenControlObject === 'CHECK_BOX') {%>							
																<li class="btn">
																	<input type="radio" name="<%= filters.attributes[i].attributeName %>" value="<%= availablefilter.possibleValues[c] %>" autocomplete="off">
																	<div class="circle"></div>
																	<h6><%= availablefilter.possibleValues[c] %></h6>
																</li>
															<% }%>
															<% }%>
															
														<% }%>
														<% }%>
	
												</ul>
											</div>
											<!-- <div class="request_new_service">
												<a href="javascript:void(0)">Request New Service</a>
											</div> -->
										</div>
										<% if(filters.attributes[i].attributeName !== "Junk Type" && filters.attributes[i].attributeName !== "Haul Size") { %>
										<div class="in_details" id="<%= filters.attributes[i].attributeName %>">
										</div>
										<% } %>
									</div>
								</div>
							</div>
						</div>
					</div>
					<%  }%>
					<% }%> 
					
					<div class="single_filter">
						<div class="dropdown">
							<a class="btn gbtn" href="javascript:void(0)" data-target="#languageTypeFilter" data-toggle="dropdown">Language</a>
						  
							<div class="dropdown-menu language_filter_content filter_down" aria-labelledby="languageTypeFilter">
								<div class="filter_content filter_content_details">
									<div class="filters_in_details filters_in_details_dropdown">
										<div class="filters_title">
											<div class="filter_heading">
												<h4>Filter by:</h4>
											</div>

											<div class="filter_types filter_types_language">
												<ul data-toggle="buttons" name="language-filter">
													<div class="filter_type_heading">
														<h5>Language</h5>
													</div>

													<li class="btn">
														<input type="radio" name="languageFilter" value="English" autocomplete="off">
														<div class="circle"></div>
														<h6>English</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="Español" autocomplete="off">
														<div class="circle"></div>
														<h6>Español</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="Français" autocomplete="off">
														<div class="circle"></div>
														<h6>Français</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="Pусский" autocomplete="off">
														<div class="circle"></div>
														<h6>Pусский</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="Polskie" autocomplete="off">
														<div class="circle"></div>
														<h6>Polskie</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="Deutsch" autocomplete="off">
														<div class="circle"></div>
														<h6>Deutsch</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="Italiano" autocomplete="off">
														<div class="circle"></div>
														<h6>Italiano</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="中國人" autocomplete="off">
														<div class="circle"></div>
														<h6>中國人</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="Português" autocomplete="off">
														<div class="circle"></div>
														<h6>Português</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="한국인" autocomplete="off">
														<div class="circle"></div>
														<h6>한국인</h6>
													</li>
	
													<li class="btn">
														<input type="radio" name="languageFilter" value="日本" autocomplete="off">
														<div class="circle"></div>
														<h6>日本</h6>
													</li>
												</ul>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="single_filter">
						<div class="dropdown">
							<a class="btn gbtn" href="javascript:void(0)" data-target="#otherTypeFilter" data-toggle="dropdown">Other Filter</a>
						  
							<div  class="dropdown-menu filter_down other_filter_down" aria-labelledby="otherTypeFilter">
								<div class="filter_content other_filter_content filter_content_details">
									<div class="filters_in_details">
										<div class="filters_title">
											<div class="filter_heading">
												<h4>Filter by:</h4>
											</div>

											<div class="filter_types filter_types_other" name="other-filter">
												<ul data-toggle="buttons" >
													<% if(isEmergency) { %>
														<li class="btn need_bdr_bottom active">
															<input type="radio" name="emergencySeven" autocomplete="off" checked>
															<div class="circle"></div>
															<h6>Emergency 24/7</h6>
														</li>
													<% } else {%>
														<li class="btn need_bdr_bottom">
															<input type="radio" name="emergencySeven" autocomplete="off">
															<div class="circle"></div>
															<h6>Emergency 24/7</h6>
														</li>
													<% } %>
												</ul>

												<ul data-toggle="buttons">
													<% if(isOnline){ %>
														<li class="btn need_bdr_bottom active">
															<input type="radio" name="online" autocomplete="off" checked>
															<div class="circle"></div>
															<h6>Online Companies</h6>
														</li>
													<% } else {%>
														<li class="btn need_bdr_bottom">
															<input type="radio" name="online" autocomplete="off">
															<div class="circle"></div>
															<h6>Online Companies</h6>
														</li>
													<% } %>
												</ul>

												<ul data-toggle="buttons">
													<div class="reviews_filter">
														<h5>Reviews</h5>
	
														<li class="btn">
															<input type="radio" name="reviewFilter" value="5" autocomplete="off">
															<div class="circle"></div>
															<h6>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<span class="and_up">& Up</span>
															</h6>
														</li>
	
														<li class="btn">
															<input type="radio" name="reviewFilter" value="4.5" autocomplete="off">
															<div class="circle"></div>
															<h6>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<i class="fas fa-star-half-alt"></i>
																<span class="and_up">& Up</span>
															</h6>
														</li>
	
														<li class="btn">
															<input type="radio" name="reviewFilter" value="3" autocomplete="off">
															<div class="circle"></div>
															<h6>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<i class="far fa-star"></i>
																<i class="far fa-star"></i>
																<span class="and_up">& Up</span>
															</h6>
														</li>
	
														<li class="btn">
															<input type="radio" name="reviewFilter" value="2" autocomplete="off">
															<div class="circle"></div>
															<h6>
																<i class="fas fa-star"></i>
																<i class="fas fa-star"></i>
																<i class="far fa-star"></i>
																<i class="far fa-star"></i>
																<i class="far fa-star"></i>
																<span class="and_up">& Up</span>
															</h6>
														</li>
													</div>
												</ul>

												<div class="the_budget_filter">
													<h5>Budget</h5>
													<div class="budget_filter">
														<div class="form-group">
															<label for="">Min.</label>
															<div class="input_icon">
																<input type="text" name="minBudget" placeholder="Any" class="form-control">
																<i class="fas fa-dollar-sign"></i>
															</div>
														</div>
														<div class="form-group">
															<label for="">Max.</label>
															<div class="input_icon">
																<input type="text" name="maxBudget" placeholder="Any" class="form-control">
																<i class="fas fa-dollar-sign"></i>
															</div>
														</div>
													</div>
												</div>

												<ul data-toggle="buttons">
													<% if(isfinancingAvailable) { %>
														<li class="btn need_bdr_bottom active">
															<input type="radio" name="financingAvailable" autocomplete="off" checked>
															<div class="circle"></div>
															<h6>Financing Available</h6>
														</li>
													<% } else {%>
														<li class="btn need_bdr_bottom">
															<input type="radio" name="financingAvailable" autocomplete="off">
															<div class="circle"></div>
															<h6>Financing Available</h6>
														</li>
													<% } %>
												</ul>

												<ul data-toggle="buttons">
													<% if(isVerified) { %>
														<li  class="btn need_bdr_bottom active">
															<input type="radio" name="verified" autocomplete="off" checked>
															<div class="circle"></div>
															<h6>Verified</h6>
														</li>
													<% } else {%>
														<li  class="btn need_bdr_bottom">
															<input type="radio" name="verified" autocomplete="off">
															<div class="circle"></div>
															<h6>Verified</h6>
														</li>
													<% } %>
												</ul>

												<ul data-toggle="buttons">
													<% if(isLicensed) { %>
														<li class="btn need_bdr_bottom active">
															<input type="radio" name="licensed" autocomplete="off" checked>
															<div class="circle"></div>
															<h6>Licensed</h6>
														</li>
													<% } else {%>
														<li class="btn need_bdr_bottom">
															<input type="radio" name="licensed" autocomplete="off">
															<div class="circle"></div>
															<h6>Licensed</h6>
														</li>
													<% } %>
												</ul>

												<ul data-toggle="buttons">
													<% if(isInsured) { %>
														<li class="btn need_bdr_bottom active">
															<input type="radio" name="insured" autocomplete="off" checked>
															<div class="circle"></div>
															<h6>Insured</h6>
														</li>
													<% } else {%>
														<li class="btn need_bdr_bottom">
															<input type="radio" name="insured" autocomplete="off">
															<div class="circle"></div>
															<h6>Insured</h6>
														</li>
													<% } %>
												</ul>

												<ul data-toggle="buttons">
													<% if(isBonded) { %>
														<li class="btn active">
															<input type="radio" name="bonded" autocomplete="off" checked>
															<div class="circle"></div>
															<h6>Bonded</h6>
														</li>
													<% } else {%>
														<li class="btn">
															<input type="radio" name="bonded" autocomplete="off">
															<div class="circle"></div>
															<h6>Bonded</h6>
														</li>
													<% } %>
												</ul>
											</div>
										</div>

										<div class="in_details grid_item">
											<div class="illustration_image">
												<img src="../images/layout/24-7-emergency-services.png" class="img-fluid" alt="" />
											</div>
											<div class="illustration_texts">
												<p>These are companies that are available 24/7 that can give you further assistance on any time of the clock.</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="single_filter" >
						<div class="dropdown">
							<a class="btn gbtn" href="javascript:void(0)" data-target="#locationTypeFilter" data-toggle="dropdown">Location</a>
						  
							<div class="dropdown-menu filter_down location_filter_down" aria-labelledby="locationTypeFilter">
								<div class="filter_content">
									<div class="filter_heading">
										<h4>Filter by:</h4>
										<h5>Location</h5>
									</div>
										<div class="search_bar">
											<input type="search" name="location" placeholder="City, State or Zip Code" class="form-control">
											<button type="submit" class="btn"><img src="../images/layout/search_icon_black.png" class="img-fluid" alt="" /></button>
										</div>

										<!-- <div class="use_current_location">
											<a href="javascript:void(0)"><i class="fas fa-crosshairs"></i> Use My Current Location</a>
										</div> -->

										<!-- <div class="distance_selection">
											<ul data-toggle="buttons">
												<li class="btn">
													<input type="radio" name="location_distance" autocomplete="off"> 
													<h6>10 mi</h6>
												</li>
												<li class="btn">
													<input type="radio" name="location_distance" autocomplete="off"> 
													<h6>25 mi</h6>
												</li>
												<li class="btn active">
													<input type="radio" name="location_distance" checked autocomplete="off"> 
													<h6>50 mi</h6>
												</li>
												<li class="btn">
													<input type="radio" name="location_distance" autocomplete="off"> 
													<h6>100 mi</h6>
												</li> 
												<li class="btn">
													<input type="radio" name="location_distance" autocomplete="off"> 
													<h6>Anywhere</h6>
												</li> 
											</ul>
										</div> -->
								</div>
							</div>
						</div>
					</div>

					<div class="single_filter all_filters">
						<input type="hidden" name="category" value="<%= filters.title %>">
						<button class="btn gbtn" type="submit" ><img src="../images/layout/all_filter_icon.png" class="img-fluid" alt="" /> Apply filters</button>				
					</div>
				
				</div>
				</form>
				<!--===== Markup For "Filters" Ends Here =====-->


				<!--===== Markup For "Filter Results" Starts From Here =====-->
				<div class="filter_result">
					<div class="applied_title grid_item">
						<h5>Applied Filters:</h5>
					</div>

					<div class="applied_filters">
						<ul>
							<% for(key in query){ %>
								<% if(key === "Service Type" || key === "Material Type" || key === "Property Type" || key === "Pest Type" || key === "Appliance Type" || key === "Lock Type" || key === "Junk Type" || key === "Haul Size" || key === "Type of Moving Truck" || key === "Truck Tow Type" || key === "Vehicle Type" || key === "languageFilter") {%>
									<li><span class="gbadge gbadge_orange"><%= query[key] %><a id="<%=key%>filter" href="javascript:void(0)"><i class="fas fa-times-circle"></i></a></span></li>
								<% }%>
							<% }%>
						</ul>
					</div>

					<div class="found_services grid_item">
						<h6><%= servicePorts.length ? servicePorts.length : 0 %> Service Ports</h6>
					</div>
				</div>
				<!--===== Markup For "Filter Results" Ends Here =====-->

				<!--===== Markup For "Found Companies" Starts From Here =====-->
				<div class="found_services">

				<% for(let i = 0; i< servicePorts.length; i++){ %>
					<div class="single_service">
						<div class="company_info">
							<div class="title_tags">
								<div class="service_title grid_item">
									<h5><%= servicePorts[i].title %></h5>
								</div>
								<div class="tags">
									<div class="service_category">
										<ul>
											<% for(key in query){ %>
												<% if(key === "Service Type" || key === "Material Type" || key === "Pest Type" || key === "Appliance Type" || key === "Lock Type" || key === "Junk Type" || key === "Haul Size" || key === "Type of Moving Truck" || key === "Truck Tow Type" || key === "Vehicle Type" ) {%>
													<li><span class="gbadge gbadge_purple"><%= query[key] %></li>
												<% }%>
											<% }%>
										</ul>
									</div>
								</div>
							</div>
							<div class="service_img_info">
								<div class="service_img_slider owl_controls_inner">
									<div class="owl-carousel">
										<% for(let j=0; j< servicePorts[i].images.length; j++){ %>
											<div class="single_image">
												<a href="/service/<%= servicePorts[i]._id %>"><img src="<%= servicePorts[i].images[j].url %>" class="img-fluid" alt="servicePort image" /></a>
											</div>
										<% }%>
									</div>
									<div class="view_ports">
										<a href="/service/<%= servicePorts[i]._id %>">View Service Port</a>
									</div>
									<div class="ratings ratings_desktop">
										<span class="rating_point" style="font-size: 15px;"><%= servicePorts[i].companyInfo.averageReview %></span>
										<% if(typeof servicePorts[i].companyInfo.averageReview !== 'undefined') { %>
											<% let intVal = parseInt(servicePorts[i].companyInfo.averageReview), flag = false; leftOver = 0 %>
											<% for(let i=0; i< intVal; i++){ %>
													<i class="fas fa-star"></i>
											<% }%>
											<% leftOver = 5 - intVal %>
										<% if(!Number.isInteger(servicePorts[i].companyInfo.averageReview)){ %>
											<% let decimalPart = servicePorts[i].companyInfo.averageReview % 1; %>
											<% if(decimalPart == 0.5){ %>
												<i class="fas fa-star-half-alt"></i>
												<% flag = true %>
											<% } else if(Math.round(decimalPart) > 0.5) { %>
												<i class="fas fa-star"></i>
												<% flag = true %>
											<% } %>
										<% }%>
												<% if(flag) {%>
													<% leftOver = leftOver - 1 %>
												<% } %>
												<% for(let i=0; i< leftOver; i++){ %>
													<i class="far fa-star"></i>
												<% }%>
										<% }%>
										<span class="review_amount"><%= servicePorts[i].companyInfo.reviews.length %> Reviews</span>
									</div>
								</div>
								<div class="service_info">
									<div class="logo_info">
										<div class="logo">
											<% if(servicePorts[i].companyInfo.logo) { %>
												<a href="/company-profile/<%= servicePorts[i].companyInfo._id %>"><img src="<%= servicePorts[i].companyInfo.logo %>" class="img-fluid" alt="company logo" /></a>
											  <% } else { %>
												<a href="/company-profile/<%= servicePorts[i].companyInfo._id %>"><img src="../images/avatar.png" class="img-fluid" alt="company logo" /></a>
											  <% } %>
											
											<% if(servicePorts[i].companyInfo.companyStatus) {%>
												<span class="activity_status online_status"></span>
											<% } else {%>
												<span class="activity_status offline_status"></span>
											<% }%>
										</div>
										<div class="info grid_item">
											<a href="/company-profile/<%= servicePorts[i].companyInfo._id %>"><h5><%= servicePorts[i].companyInfo.companyName %></h5></a>
											<h6>$<%= servicePorts[i].priceFrom %> - $<%= servicePorts[i].priceTo %></h6>
											<div class="ratings ratings_mobile">
												<span class="rating_point">4.2</span>
												<i class="fas fa-star"></i>
												<i class="fas fa-star"></i>
												<i class="fas fa-star"></i>
												<i class="fas fa-star"></i>
												<i class="fas fa-star-half-alt"></i>
												<span class="review_amount"><%= servicePorts[i].companyInfo.reviews.length %> Reviews</span>
											</div>
										</div>
									</div>
									<div class="about">
									<div class="para_texts">
											<p class="more"><%= servicePorts[i].description %></p>
										</div>
									</div>
									<div class="action_buttons">
										<ul>
											<% if(currentUser) {%>
												<li><a class="gbtn gbtn" href="javascript:void(0)" data-target="#messageModal<%= i %>" data-toggle="modal">Message</a></li>
											<% } else { %>
												<li><a class="gbtn gbtn" href="javascript:void(0)" data-target="#loginForm" data-toggle="modal">Message</a></li>
											<% } %>
											<li><a class="gbtn gbtn_bdr" href="/service/<%= servicePorts[i]._id %>">View Port</a></li>
											<li class="mobile_map_link"><a class="gbtn gbtn_bdr" href="javascript:void(0)" data-target="#companyLocation" data-toggle="modal">View Map</a></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<div class="company_location">
							<div id="map-<%= servicePorts[i]._id %>">
							</div>
							<!-- <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d232633.36269179682!2d90.82399055752151!3d24.35010498046716!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3756bcb4fb21875f%3A0xf87604c5118c4b06!2sNikli%20Upazila!5e0!3m2!1sen!2sbd!4v1631185851149!5m2!1sen!2sbd" width="" height="" style="border:0;" allowfullscreen="" loading="lazy"></iframe> -->
						</div>
					</div>
				<% }%>
				

					<!--===== Markup For "Pagination" Starts From Here =====-->
					<nav aria-label="">
						<ul class="pagination">
							<% if(totalPorts > limit){ %>
								<% for(let i=0; i< Math.floor(totalPorts/limit); i++){ %>
									<li class="page-item" id="pageNo<%=i+1%>"><a class="page-link" href="javascript:void(0)"><%= i+1 %></a></li>	
								<% } %>
								<li class="page-item" id="nextPage"><a class="page-link" href="javascript:void(0)">Next <i class="fas fa-arrow-right"></i></a></li>
							<%}%>
						</ul>
					</nav>
					<!--===== Markup For "Pagination" Ends Here =====-->
				</div>
				<!--===== Markup For "Found Companies" Ends Here =====-->
			</div>
		</section>


		<!--===== Markup For "Registration Counter" Starts From Here =====-->
		<div class="registration_counter_wrap">
			<div class="container">
				<div class="registration_counter">
					<div class="single_count">
						<div class="heading">
							<h2><%= total.length %>+</h2>
						</div>
						<p>Registered Companies</p>
					</div>

					<div class="single_count">
						<div class="heading">
							<h2><%= members %>+</h2>
						</div>
						<p>Registered Members</p>
					</div>
				</div>
			</div>
		</div>
		<!--===== Markup For "Registration Counter" Ends Here =====-->


	<!--===== Markup For "Footer" Starts From Here =====-->
    <footer class="footer_wrap">
      <div class="footer_top">
        <div class="container">
          <div class="footer">
            <div class="single_part">
              <div class="footer_logo">
                <a href="/"
                  ><img
                    src="../images/layout/gabazzo_logo_white.png"
                    class="img-fluid"
                    alt=""
                /></a>
              </div>
              <div class="site_links">
                <ul>
                  <li><a href="/contact-us">Contact Us</a></li>
                  <li><a href="/about-us">About</a></li>
                  <li><a href="/site-map">Sitemap</a></li>
                  <li><a href="/partnerships">Partnerships</a></li>
		  <li><a href="/investor-relations">Investor Relations</a></li>
		  <li><a href="/jobs-and-opportunities">Jobs & Opportunities</a></li>
		  <li><a href="/press-and-news">Press & News</a></li>
                </ul>
              </div>
              <div class="social_links">
                <ul>
                  <li>
                    <a
                      href="https://www.facebook.com/gabazzoBCT"
                      target="_blank"
                      ><i class="fab fa-facebook-f"></i
                    ></a>
                  </li>
                  <li>
                    <a
                      href="https://www.linkedin.com/company/gabazzo/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                  </li>
		  <li>
                    <a
                      href="https://discord.gg/RTDhKw4r99" target="_blank"><i class="fab fa-discord"></i></a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="single_part">
              <h4>Members</h4>
              <div class="site_links">
                <ul>
                  <li><a href="/sign-up">Sign Up</a></li>
		  <li><a href="/trust-and-safety-members">Trust & Safety</a></li>
		  <li><a href="/ranking-system-members">Ranking System</a></li>
                </ul>
              </div>
            </div>
            <div class="single_part">
              <h4>Business</h4>
              <div class="site_links">
                <ul>
                  <li><a href="/company-sign-up-home">Register Business</a>
                  </li>
		  <li><a href="/company-sign-up-home">Study Buyer</a>
                  </li>
		   <li><a href="/seller-league-system">League System</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="single_part">
              <h4>Support</h4>
              <div class="site_links">
                <ul>
		  <li><a href="/help-center-buyer">Help Center</a></li>
                  <li><a href="/terms-and-conditions">Terms of Use</a></li>
                  <li><a href="/privacy-policy">Privacy Policy</a></li>
                  <li><a href="/cookie-policy">Cookie Policy</a></li>
                  <li><a href="/safety-for-members">Safety</a></li>
		  <li><a href="/covid-info">Covid-19 Info</a></li>
		  <li><a href="/intellectual-property-claims">IP Claims</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="copyright">
        <div class="container">
          <p>
            Copyright &copy; 2021 Gabazzo. All Rights Reserved. Patent Pending
          </p>
        </div>
      </div>
    </footer>
    <!--===== Markup For "Footer" Ends Here =====-->

		<!--===== Markup For "Company Location" Starts From Here =====-->
		<div class="modal fade location_map_modal"  id="companyLocation">
			<div class="modal-dialog modal-lg modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h5>Roof Contructor Company Location</h5>
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>
					<div class="modal-body">
						<div class="company_location">
							<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d232633.36269179682!2d90.82399055752151!3d24.35010498046716!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3756bcb4fb21875f%3A0xf87604c5118c4b06!2sNikli%20Upazila!5e0!3m2!1sen!2sbd!4v1631185851149!5m2!1sen!2sbd" width="" height="" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--===== Markup For "Company Location" Ends Here =====-->


		<!--===== Markup For "All Filters Modal" Starts From Here =====-->
	<form action="/search" method="GET" >	
		<div class="modal fade all_filter_modal" id="allFilters">
			<div class="modal-dialog modal-lg modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-body">
						<section id="tabs" class="all_filter_tab">
							<div class="nav nav-tabs" id="nav-tab" role="tablist">
								<% for(let i = 0; i< filters.attributes.length; i++) { %>
									<% let field = filters.attributes[i].attributeName %>
									<% if(field === "Service Type" || field === "Material Type" || field === "Property Type" || field === "Pest Type" || field === "Appliance Type" || field === "Lock Type" || field === "Junk Type" || field === "Haul Size" || field === "Type of Moving Truck" || field === "Truck Tow Type" || field === "Vehicle Type"  ) { %>
										<% newID = field.replace(/ /g,'') %>
										<a class="nav-item nav-link " id="<%=newID%>-tab" data-toggle="tab" href="#<%=newID%>" role="tab" aria-controls="<%=newID%>" aria-selected="false"><%=field%></a>
									<% }%>
								<% }%>
								
								<a class="nav-item nav-link" id="the_location_tab" data-toggle="tab" href="#the_location" role="tab" aria-controls="the_location" aria-selected="true">Location</a>												
								<a class="nav-item nav-link" id="the_Language_tab" data-toggle="tab" href="#the_Language" role="tab" aria-controls="the_Language" aria-selected="false">Languages</a>				
								<a class="nav-item nav-link" id="other_Filters_tab" data-toggle="tab" href="#other_Filters" role="tab" aria-controls="other_Filters" aria-selected="false">Other Filters</a>
							</div>

							
							<div class="tab-content" id="nav-tabContent">
							<% for(let i = 0; i< mobileFilters.attributes.length; i++) { %>
								<% let field = mobileFilters.attributes[i].attributeName %>
								<% if(field === "Service Type" || field === "Material Type" || field === "Property Type" || field === "Pest Type" || field === "Appliance Type" || field === "Lock Type" || field === "Junk Type" || field === "Haul Size" || field === "Type of Moving Truck" || field === "Truck Tow Type" || field === "Vehicle Type"  ) { %>
									<% newID = field.replace(/ /g,'') %>
									<div class="tab-pane fade" id="<%=newID%>" role="tabpanel" aria-labelledby="<%=newID%>-tab">
										<div class="filter_content filter_content_details">
									<div class="filters_in_details">
										<div class="filters_title">
											<div class="filter_heading">
												<h4>Filter by:</h4>
											</div>
		
											<div class="filter_types">
												<ul data-toggle="buttons">
													<% for(let j = 0; j< mobileFilters.attributes[i]?.possibleValues.length; j++) {%>
				
														<% if(mobileFilters.attributes[i].screenControlObject === 'LABEL') {%>
															<div class="filter_type_heading">
																<h5><%= mobileFilters.attributes[i].possibleValues[j] %></h5>
															</div>
														<%} else if(mobileFilters.attributes[i].screenControlObject === 'CHECK_BOX') {%>		
															<li class="btn">
																<input type="radio" name="<%= filters.attributes[i].attributeName %>" value="<%= filters.attributes[i].possibleValues[j] %>" autocomplete="off">
																<div class="circle"></div>
																<h6><%= mobileFilters.attributes[i].possibleValues[j] %> </h6>
															</li>
													<% }%> 
													<% var availablefilter_ = mobileFilters.attributes.find(o => o.attributeName === filters.attributes[i].possibleValues[j]); %>
													<% if (typeof availablefilter_ !== 'undefined'){ %>
													<!-- Filter out those values that are traversed -->
														<% mobileFilters.attributes = mobileFilters.attributes.filter(obj => obj.attributeName !== filters.attributes[i].possibleValues[j]) %>
														
														<% for(let c = 0; c< availablefilter.possibleValues.length; c++) { %>
															<% if(availablefilter_.screenControlObject === 'LABEL') {%>
																<div class="filter_type_heading">
																	<h5><%= availablefilter_.possibleValues[c] %></h5>
																</div>>
															<%} else if(availablefilter_.screenControlObject === 'CHECK_BOX') {%>							
																<li class="btn">
																	<input type="radio" name="<%= filters.attributes[i].attributeName %>" value="<%= availablefilter.possibleValues[c] %>" autocomplete="off">
																	<div class="circle"></div>
																	<h6><%= availablefilter_.possibleValues[c] %></h6>
																</li>
															<% }%>
															<% }%>
															
														<% }%>
														<% }%>
	
												</ul>
											</div>
											<!-- <div class="request_new_service">
												<a href="javascript:void(0)">Request New Service</a>
											</div> -->
										</div>
								
										<% if(filters.attributes[i]?.attributeName !== "Junk Type" && filters.attributes[i]?.attributeName !== "Haul Size") { %>
										<div class="in_details" id="<%= filters.attributes[i]?.attributeName %>">
										</div>
										<% } %>
									</div>
									</div>
								</div>
								<% } %>
								
							<% }%>
								<!-- hidden field for the query params -->
								<input type="hidden" name="category" value="<%= filters.title %>">

								<div class="tab-pane fade" id="the_location" role="tabpanel" aria-labelledby="the_location_tab">
									<div class="filter_content filter_content_location">
										<div class="filter_heading">
											<h5>Location</h5>
										</div>

									
											<div class="search_bar">
												<input type="search" name="location_distance" placeholder="City, State or Zip Code" class="form-control">
												<button type="submit" class="btn"><img src="../images/layout/search_icon_black.png" class="img-fluid" alt="" /></button>
											</div>

											<!-- <div class="use_current_location">
												<a href="javascript:void(0)"><i class="fas fa-crosshairs"></i> Use My Current Location</a>
											</div> -->

											<!-- <div class="distance_selection">
												<ul data-toggle="buttons">
													<li class="btn">
														<input type="radio" name="location_distance" autocomplete="off"> 
														<h6>10 mi</h6>
													</li>
													<li class="btn">
														<input type="radio" name="location_distance" autocomplete="off"> 
														<h6>25 mi</h6>
													</li>
													<li class="btn active">
														<input type="radio" name="location_distance" checked autocomplete="off"> 
														<h6>50 mi</h6>
													</li>
													<li class="btn">
														<input type="radio" name="location_distance" autocomplete="off"> 
														<h6>100 mi</h6>
													</li> 
													<li class="btn">
														<input type="radio" name="location_distance" autocomplete="off"> 
														<h6>Anywhere</h6>
													</li> 
												</ul>
											</div> -->
									</div>				
								</div>

								<div class="tab-pane fade" id="the_Language" role="tabpanel" aria-labelledby="the_Language_tab">
									<div class="filter_content filter_content_details">
										<div class="filters_in_details the_language_filters_in_details">
											<div class="filters_title">
												<div class="filter_heading">
													<h4>Filter by:</h4>
												</div>
	
												<div class="filter_types filter_types_language">
													<ul data-toggle="buttons"  name="language-filter">
														<div class="filter_type_heading">
															<h5>Language</h5>
														</div>
														<li class="btn">
															<input type="radio" name="languageFilter" value="English" autocomplete="off">
															<div class="circle"></div>
															<h6>English</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="Español" autocomplete="off">
															<div class="circle"></div>
															<h6>Español</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="Français" autocomplete="off">
															<div class="circle"></div>
															<h6>Français</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="Pусский" autocomplete="off">
															<div class="circle"></div>
															<h6>Pусский</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="Polskie" autocomplete="off">
															<div class="circle"></div>
															<h6>Polskie</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="Deutsch" autocomplete="off">
															<div class="circle"></div>
															<h6>Deutsch</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="Italiano" autocomplete="off">
															<div class="circle"></div>
															<h6>Italiano</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="中國人" autocomplete="off">
															<div class="circle"></div>
															<h6>中國人</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="Português" autocomplete="off">
															<div class="circle"></div>
															<h6>Português</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="한국인" autocomplete="off">
															<div class="circle"></div>
															<h6>한국인</h6>
														</li>
		
														<li class="btn">
															<input type="radio" name="languageFilter" value="日本" autocomplete="off">
															<div class="circle"></div>
															<h6>日本</h6>
														</li>
													</ul>
												</div>
											</div>
										</div>
									</div>											
								</div>
																				
								<div class="tab-pane fade" id="other_Filters" role="tabpanel" aria-labelledby="other_Filters_tab">
									<div class="filter_content other_filter_content filter_content_details">
										<div class="filters_in_details">
											<div class="filters_title">
												<div class="filter_heading">
													<h4>Filter by:</h4>
												</div>
	
												<div class="filter_types filter_types_other" name="other-filter">
													<ul data-toggle="buttons" >
														<% if(isEmergency) { %>
															<li class="btn need_bdr_bottom active">
																<input type="radio" name="emergencySeven" autocomplete="off" checked>
																<div class="circle"></div>
																<h6>Emergency 24/7</h6>
															</li>
														<% } else {%>
															<li class="btn need_bdr_bottom">
																<input type="radio" name="emergencySeven" autocomplete="off">
																<div class="circle"></div>
																<h6>Emergency 24/7</h6>
															</li>
														<% } %>
													</ul>
	
													<ul data-toggle="buttons">
														<% if(isOnline){ %>
															<li class="btn need_bdr_bottom active">
																<input type="radio" name="online" autocomplete="off" checked>
																<div class="circle"></div>
																<h6>Online Companies</h6>
															</li>
														<% } else {%>
															<li class="btn need_bdr_bottom">
																<input type="radio" name="online" autocomplete="off">
																<div class="circle"></div>
																<h6>Online Companies</h6>
															</li>
														<% } %>
													</ul>
													<ul data-toggle="buttons">
														<div class="reviews_filter">
															<h5>Reviews</h5>
		
															<li class="btn">
																<input type="radio" name="reviewFilter" value="5" autocomplete="off">
																<div class="circle"></div>
																<h6>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<span class="and_up">& Up</span>
																</h6>
															</li>
		
															<li class="btn">
																<input type="radio" name="reviewFilter" value="4.5" autocomplete="off">
																<div class="circle"></div>
																<h6>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star-half-alt"></i>
																	<span class="and_up">& Up</span>
																</h6>
															</li>
		
															<li class="btn">
																<input type="radio" name="reviewFilter" value="3" autocomplete="off">
																<div class="circle"></div>
																<h6>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<i class="far fa-star"></i>
																	<i class="far fa-star"></i>
																	<span class="and_up">& Up</span>
																</h6>
															</li>
		
															<li class="btn">
																<input type="radio" name="reviewFilter" value="2" autocomplete="off">
																<div class="circle"></div>
																<h6>
																	<i class="fas fa-star"></i>
																	<i class="fas fa-star"></i>
																	<i class="far fa-star"></i>
																	<i class="far fa-star"></i>
																	<i class="far fa-star"></i>
																	<span class="and_up">& Up</span>
																</h6>
															</li>
														</div>
													</ul>
	
													<div class="the_budget_filter">
														<h5>Budget</h5>
														<div class="budget_filter">
															<div class="form-group">
																<label for="">Min.</label>
																<div class="input_icon">
																	<input type="text" name="minBudget" placeholder="Any" class="form-control">
																	<i class="fas fa-dollar-sign"></i>
																</div>
															</div>
															<div class="form-group">
																<label for="">Max.</label>
																<div class="input_icon">
																	<input type="text" name="maxBudget" placeholder="Any" class="form-control">
																	<i class="fas fa-dollar-sign"></i>
																</div>
															</div>
														</div>
													</div>
	
													<ul data-toggle="buttons">
														<% if(isfinancingAvailable) { %>
															<li class="btn need_bdr_bottom active">
																<input type="radio" name="financingAvailable" autocomplete="off" checked>
																<div class="circle"></div>
																<h6>Financing Available</h6>
															</li>
														<% } else {%>
															<li class="btn need_bdr_bottom">
																<input type="radio" name="financingAvailable" autocomplete="off">
																<div class="circle"></div>
																<h6>Financing Available</h6>
															</li>
														<% } %>
													</ul>
	
													<ul data-toggle="buttons">
														<% if(isVerified) { %>
															<li  class="btn need_bdr_bottom active">
																<input type="radio" name="verified" autocomplete="off" checked>
																<div class="circle"></div>
																<h6>Verified</h6>
															</li>
														<% } else {%>
															<li  class="btn need_bdr_bottom">
																<input type="radio" name="verified" autocomplete="off">
																<div class="circle"></div>
																<h6>Verified</h6>
															</li>
														<% } %>
													</ul>
	
													<ul data-toggle="buttons">
														<% if(isLicensed) { %>
															<li class="btn need_bdr_bottom active">
																<input type="radio" name="licensed" autocomplete="off" checked>
																<div class="circle"></div>
																<h6>Licensed</h6>
															</li>
														<% } else {%>
															<li class="btn need_bdr_bottom">
																<input type="radio" name="licensed" autocomplete="off">
																<div class="circle"></div>
																<h6>Licensed</h6>
															</li>
														<% } %>
													</ul>
	
													<ul data-toggle="buttons">
														<% if(isInsured) { %>
															<li class="btn need_bdr_bottom active">
																<input type="radio" name="insured" autocomplete="off" checked>
																<div class="circle"></div>
																<h6>Insured</h6>
															</li>
														<% } else {%>
															<li class="btn need_bdr_bottom">
																<input type="radio" name="insured" autocomplete="off">
																<div class="circle"></div>
																<h6>Insured</h6>
															</li>
														<% } %>
													</ul>
	
													<ul data-toggle="buttons">
														<% if(isBonded) { %>
															<li class="btn active">
																<input type="radio" name="bonded" autocomplete="off" checked>
																<div class="circle"></div>
																<h6>Bonded</h6>
															</li>
														<% } else {%>
															<li class="btn">
																<input type="radio" name="bonded" autocomplete="off">
																<div class="circle"></div>
																<h6>Bonded</h6>
															</li>
														<% } %>
													</ul>

												</div>
											</div>
	
											<div class="in_details grid_item">
												<div class="illustration_image">
													<img src="../images/layout/24-7-emergency-services.png" class="img-fluid" alt="" />
												</div>
												<div class="illustration_texts">
													<p>These are companies that are available 24/7 that can give you further assistance on any time of the clock.</p>
												</div>
											</div>
										</div>
									</div>										
								</div>												
							</div>
						
						</section>

						<!-- <div class="applied_filters">
							<ul>
								<li><span class="gbadge gbadge_orange">Roof Installation <a href="javascript:void(0)"><i class="fas fa-times-circle"></i></a></span></li>
								<li><span class="gbadge gbadge_purple">Spanish <a href="javascript:void(0)"><i class="fas fa-times-circle"></i></a></span></li>
							</ul>
						</div> -->

						<div class="selected_done">
							<div class="selected_amount grid_item">
								<!-- <h5>2 Selected</h5> -->
							</div>

							<div class="submit_button">
								<button type="submit" class="btn gbtn">Done</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
		<!--===== Markup For "All Filters Modal" Ends Here =====-->


		<% for(let i = 0; i< servicePorts.length; i++) { %>
		<!--===== Markup For "Message Popup" Starts From Here =====-->
		<div class="modal fade msg_popup_modal" id="messageModal<%=i%>">
			<div class="modal-dialog modal-lg modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h3>Send a Message</h3>
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>
					<div class="modal-body">
						<div class="msg_pop_box">
							<div class="company_info">
								<div class="company_logo_name">
									<div class="company_logo">
										<% if(servicePorts[i].companyInfo.logo) { %>
											<a href="/company-profile/<%= servicePorts[i].companyInfo._id %>"><img src="<%= servicePorts[i].companyInfo.logo %>" class="img-fluid" alt="company logo" /></a>
										  <% } else { %>
											<a href="/company-profile/<%= servicePorts[i].companyInfo._id %>"><img src="../images/avatar.png" class="img-fluid" alt="company logo" /></a>
										  <% } %>
										
										<% if(servicePorts[i].companyInfo.companyStatus) {%>
											<span class="activity_status online_status"></span>
										<% } else {%>
											<span class="activity_status offline_status"></span>
										<% }%>
									</div>
									<div class="company_name">
										<h5><%= servicePorts[i].companyInfo.companyName %></h5>
										<% if(servicePorts[i].companyInfo.companyStatus) {%>
											<h6>Online</h6>
										<% } else {%>
											<h6>Away</h6>
										<% }%>
									</div>
								</div>
								<div class="need_requirements">
									<h5>Please Include:</h5>
									<ul>
										<li>Project Description</li>
										<li>Specific Instructions</li>
										<li>Relevant Files</li>
										<li>Your Budget</li>
										<li>Delivery Time</li>
									</ul>
								</div>
							</div>
							<div class="msg_box_wrap">
								<div class="time_zone">
									<h5>Time Zone: <span>10:53 AM</span></h5>
								</div>
								<form action="../message/<%= servicePorts[i].companyInfo._id %>"  enctype="multipart/form-data" method="POST">
									<div class="msg_box">
										<textarea name="message" id="myText" placeholder="Type your message..." cols="30" rows="10" class="form-control"></textarea>
										<div class="indicator_attach">
											<div class="character_indicator grid_item">
												<h6>0/2,500</h6>
											</div>
											<div class="attach_button">
												<div class="attach_file">
													<label class="attachment">
														<input type="file" name="attachments" id="<%= servicePorts[i].companyInfo._id %>"class="inputfile inputfile-1"
														data-multiple-caption="{count} files selected" multiple />
														<label id="<%= servicePorts[i].companyInfo._id+2 %>" for="<%= servicePorts[i].companyInfo._id %>"><i class="fa fa-paperclip"
															aria-hidden="true"></i></label>
															
													</label>
												</div>
											</div>
										</div>
									</div>
									<div class="submit_button">
										<button class="btn gbtn" type="submit">Send</button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--===== Markup For "Message Popup" Ends Here =====-->
		<% } %>

		
	
<!--===== Markup For "Login Form" Starts From Here =====-->
<div class="modal fade creating_list_modal" id="loginForm">
	<div class="modal-dialog modal-md modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h4>Login to Send the Message</h4>
				<a href="javascript:void(0)" class="close" data-dismiss="modal">&times;</a>
			</div>
			<div class="modal-body" style="padding: 0;">
					<section class="registration_form">
						<div class="container_gbz">
							<div class="">
								<div class="sign_in_wrap">
									<div class="form_wrapper">
										<form action="/login" method="POST">
											<div class="form">
												<div class="form-group">
													<label for="">Username</label>
													<input type="text" name="username" required class="form-control" />
												</div>
												<div class="form-group">
													<label for="">Password</label>
													<input type="password" name="password" required class="form-control" />
												</div>
												<div class="form-row">
													<div class="form-group col-6">
														<label class="checkbox">
															<input type="checkbox" name="" value="" checked />
															<span class="checkmark"></span>
															Remember Me
														</label>
													</div>
													<div class="form-group col-6 text-right">
														<a href="/forgot-password">Forgot Password?</a>
													</div>
												</div>
												<div class="create_account_button mt-0">
													<button type="submit" class="nav-link gbtn">Sign In</button>
												</div>
												<div class="or_text">
													<h4>OR</h4>
												</div>
												<div class="form_text text-center">
													<span>By clicking Sign In with Facebook or Sign In with Google, you agree to the <a
															href="/terms-and-conditions">Terms of Use</a> and <a
															href="/privacy-policy">Privacy Policy</a>.</span>
												</div>
												<div class="google_fb_sign_up">
													<ul>
														<li class="facebook"><a href="/auth/facebook"><img
																	src="../images/icons/facebook_icon.png" alt="" />Sign In With
																Facebook</a></li>
														<li class="google"><a href="/auth/google"><img src="../images/icons/google_icon.png"
																	alt="" />Sign In With
																Google</a></li>
													</ul>
												</div>
											</div>
										</form>
										<div class="form_bottom">
											<h6>Don't have an account? <a href="/sign-up">Sign Up</a>
											</h6>
										</div>
									</div>
								</div>
							</div>
						</div>
					</section>
			</div>
		</div>
	</div>
</div>
<!--===== Markup For "Login Form" Ends Here =====-->
		
		<!--jQuery Main Libraty Latest Version-->
		<script type="text/javascript" src="../js/jquery-3.5.1.min.js"></script>
		<!--Bootstrap v4.5.3 JS File-->
		<script type="text/javascript" src="../js/popper.min.js"></script>
		<script type="text/javascript" src="../js/bootstrap.min.js"></script>
		<!--Owl Carousel JS File-->
		<script type="text/javascript" src="../js/owl.carousel.min.js"></script>
		<!--Custom Script JS File-->
		<script type="text/javascript" src="../js/updatedCustom.js"></script>
		<script src="../js/services-map-new-visitors.js" type="text/javascript"></script>
		<script type="text/javascript" src="../js/autocomplete.js"></script>
		<script type="text/javascript" src="../js/messageModal.js"></script>
		<script src="../js/read_more.js" type="text/javascript"></script>

		<!--Custom JavaScript-->
		<script type="text/javascript">
			let filters = <%- JSON.stringify(availableServices) %>;
			let query = <%- JSON.stringify(query) %>;
			let totalPorts = <%- totalPorts %>
			// Selecting every radio button
			$(document).ready(function(){
				// Pagination manuplation
				$(`#pageNo${query.pageNo}`).addClass("active");
				for(let i = 0; i<totalPorts; i++){
					$(`#pageNo${i+1}`).on("click", function(){
						let pageNo = parseInt($(`#pageNo${i+1} a`).html());
						query.pageNo = pageNo;
						window.location.href =  window.location.pathname + "?" + jQuery.param(query)
					})
				}
				// Next button of pagination
				$("#nextPage").on("click", function(){
					pageNo = parseInt(query.pageNo);
					pageNo += 1;
					query.pageNo = pageNo;
					window.location.href =  window.location.pathname + "?" + jQuery.param(query)
				})
				// ================== Pagination manuplation edns ==================================
				// Applied filter manuplation
				for(key in query){
					$("[id='"+ key +"filter'").on("click", function(){
						tempKey = $(this).attr("id").toString();
						tempKey = tempKey.replace("filter", "")
						delete query[tempKey];
						// Making the API call after removing the filter
						window.location.href =  window.location.pathname + "?" + jQuery.param(query)
					})
				}
				$(".btn input").on("click", function (){
					$(this).attr("checked", true);
				})
				$(".btn input").on("change", function(){
					// Changing image only for those filters which contains the images
					if($(this).parent().parent().attr('name') !== "language-filter" &&
					$(this).parent().parent().parent().attr('name') !== "other-filter" &&
					$(this).parent().parent().parent().parent().attr('name') !== "other-filter"
					){
						let typeName = $(this).attr("name").toString();
						let selectedValue = $(this).attr("value").toString();
						let description = filters.metadata[typeName][selectedValue].description;
						let image = filters.metadata[typeName][selectedValue].image;
						let descriptionTemplate = "";
						descriptionTemplate += `<div class="single_details">
												<p>${description}</p>
											</div>`;
						let htmlTemplate = `<div class="banner_image">
											<img src="${image}" class="img-fluid" alt="image" />
												</div>
											<div class="title">
													<h4>${selectedValue}</h4>
											</div>
											<div class="details_texts">
												${descriptionTemplate}
											</div>`;
						
						// Changing the image and description in the div
						$("div[id='"+ typeName +"']").html(htmlTemplate);
					}
				})
			});
		</script>

		

		<script type="text/javascript">
			var servicePorts = <%- JSON.stringify(servicePorts) %>;
				
			$(document).ready(function(){
				servicePorts.forEach(function(port, i){	
					mapboxgl.accessToken = 'pk.eyJ1IjoiZWpzdHlseiIsImEiOiJjazJuZjBoNWIwcG84M2J4NW5icHVsYWJ2In0.NADiMyMrSjAnQNuNn_XgCA';
					const map = new mapboxgl.Map({
						container: `map-${port._id}`,
						style: 'mapbox://styles/mapbox/streets-v11',
						center: [...port.companyInfo.coordinates],
						zoom: 12
					});
					// Create a default Marker and add it to the map.
					const marker1 = new mapboxgl.Marker()
					.setLngLat([...port.companyInfo.coordinates])
					.addTo(map);
					$(`#map-${port._id}`).css({"top": 0, "bottom": 0, "width": "100%", "height":"375px"});	
					});
					$(".mapboxgl-canvas").css({"width": "100%", "height":"375px", "border": "1px solid #13BBB6"});
			})
		</script>
	</body>

</html>
